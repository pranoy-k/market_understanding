{
  "id": "WEhLXJyBWAZ2iX9I",
  "meta": {
    "instanceId": "dab3958989c237d704e8bf43a0fa463a5de18beecc20b8b8d61d43d34afd6dc0",
    "templateCredsSetupCompleted": true
  },
  "name": "Track & Analyze Personal Finances with WhatsApp AI Assistant",
  "tags": [],
  "nodes": [
    {
      "id": "71d56b6e-39e6-4d1b-aba7-4aa1441f1a38",
      "name": "Date and time",
      "type": "@n8n/n8n-nodes-langchain.toolCode",
      "position": [
        1236,
        1560
      ],
      "parameters": {},
      "typeVersion": 1.2
    },
    {
      "id": "986d96c1-6c57-498c-adc9-11f6045aad54",
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        1176,
        1960
      ],
      "parameters": {},
      "typeVersion": 1.2
    },
    {
      "id": "b4b6048a-8730-4a36-b4ec-e1ec92cb3f4e",
      "name": "OpenRouter Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "position": [
        1020,
        1940
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "bdf1ab64-65e7-4a14-aae8-dd7256414bc0",
      "name": "OpenRouter Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "position": [
        996,
        1560
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "c96df9a9-7386-485c-b257-70fda180cef8",
      "name": "Calculator",
      "type": "@n8n/n8n-nodes-langchain.toolCalculator",
      "position": [
        2464,
        1560
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "7e34f591-4b8b-4e19-b593-9de0f2ca2759",
      "name": "OpenRouter Chat Model3",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "position": [
        2344,
        1560
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "d6773c18-5cf6-491d-96b3-bd1b115bf725",
      "name": "OpenRouter Chat Model4",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "position": [
        488,
        1200
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "7540710f-3b6e-4172-82e0-1b3273966927",
      "name": "Postgres2",
      "type": "n8n-nodes-base.postgresTool",
      "position": [
        1116,
        1100
      ],
      "parameters": {},
      "typeVersion": 2.6
    },
    {
      "id": "5b05eeaa-b829-4b62-9b6f-11bd5be70557",
      "name": "OpenRouter Chat Model5",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "position": [
        996,
        1100
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "3475cd9b-4008-4477-a91b-887b2a47bc35",
      "name": "Calculator1",
      "type": "@n8n/n8n-nodes-langchain.toolCalculator",
      "position": [
        1584,
        1200
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "4bc948cc-b2de-4791-b847-7ac1f716244c",
      "name": "Structured Output Parser2",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        1236,
        1100
      ],
      "parameters": {},
      "typeVersion": 1.2
    },
    {
      "id": "e8c3e04e-5b9b-46b5-9496-910b924606e2",
      "name": "OpenRouter Chat Model6",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "position": [
        1464,
        1200
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "f4aec624-e2bd-42ab-a439-0f8301dedd86",
      "name": "SQL Query Builder",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        1028,
        1340
      ],
      "parameters": {},
      "typeVersion": 1.9
    },
    {
      "id": "d449653f-9d93-41fc-a728-be222cca64d5",
      "name": "Simple Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "position": [
        1116,
        1560
      ],
      "parameters": {},
      "typeVersion": 1.3
    },
    {
      "id": "475caba8-dfe7-4c9e-b627-19939b230c3e",
      "name": "Daily 8AM Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        180,
        980
      ],
      "parameters": {},
      "typeVersion": 1.2
    },
    {
      "id": "305cf54d-5a16-4f9a-a523-5932f27d99a6",
      "name": "Build Daily Report Query",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        400,
        980
      ],
      "parameters": {},
      "typeVersion": 1.9
    },
    {
      "id": "0c78d7ec-1937-4f87-9846-7f1613c5c929",
      "name": "Transform Query for Postgres",
      "type": "n8n-nodes-base.code",
      "position": [
        776,
        980
      ],
      "parameters": {},
      "typeVersion": 2
    },
    {
      "id": "2545df95-f6f6-432e-8173-23a0be947a2d",
      "name": "Execute Daily Report Query",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        1028,
        880
      ],
      "parameters": {},
      "typeVersion": 1.9,
      "alwaysOutputData": false
    },
    {
      "id": "9f0ca49e-7aff-4396-981b-63c438fe44be",
      "name": "Build Daily Financial Summary",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        1436,
        980
      ],
      "parameters": {},
      "typeVersion": 1.9
    },
    {
      "id": "dc84becd-8212-4132-9ae2-0cbda3badc07",
      "name": "WhatsApp: Send Daily Report",
      "type": "n8n-nodes-base.whatsApp",
      "position": [
        1812,
        980
      ],
      "webhookId": "f71b40d3-80fc-49d5-85f9-bdac44343b7a",
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "48c0a300-563f-47d9-a7b6-c3db04a3affa",
      "name": "Transform Custom Query for Postgres",
      "type": "n8n-nodes-base.code",
      "position": [
        1436,
        1440
      ],
      "parameters": {},
      "typeVersion": 2
    },
    {
      "id": "e6912637-bce0-4ec9-833c-e1c3c5a5c967",
      "name": "Execute Custom Report Query",
      "type": "n8n-nodes-base.postgres",
      "position": [
        1656,
        1440
      ],
      "parameters": {},
      "typeVersion": 2.6
    },
    {
      "id": "23aa4edd-fac3-4eaf-9131-1ab01ffa5a53",
      "name": "Format Custom Query Results",
      "type": "n8n-nodes-base.code",
      "position": [
        1876,
        1440
      ],
      "parameters": {},
      "executeOnce": false,
      "typeVersion": 2
    },
    {
      "id": "430fa0af-7441-4596-ac78-d167edbd8242",
      "name": "Convert Report to CSV",
      "type": "n8n-nodes-base.convertToFile",
      "position": [
        2096,
        1440
      ],
      "parameters": {},
      "typeVersion": 1.1
    },
    {
      "id": "1a1e6d60-a396-4c54-b0d4-eadde899edbe",
      "name": "Build Custom Financial Summary",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        2316,
        1340
      ],
      "parameters": {},
      "executeOnce": true,
      "typeVersion": 1.9
    },
    {
      "id": "5ced19ed-0614-4c48-a603-616a9df507fb",
      "name": "WhatsApp: Send Custom Report",
      "type": "n8n-nodes-base.whatsApp",
      "position": [
        2692,
        1440
      ],
      "webhookId": "f71b40d3-80fc-49d5-85f9-bdac44343b7a",
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "88ab06c7-3eb0-45e4-9d0c-438dbb763b40",
      "name": "Incoming WhatsApp Trigger",
      "type": "n8n-nodes-base.whatsAppTrigger",
      "position": [
        180,
        1840
      ],
      "webhookId": "c9f59683-0d8a-474e-add3-d07c8fa53c94",
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "3eafa0b4-2463-47f6-b27a-d15cb34bd18a",
      "name": "Message Intent Classifier",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        400,
        1840
      ],
      "parameters": {},
      "typeVersion": 1.9
    },
    {
      "id": "b5883805-9ca6-49be-9ee3-28d16250ad8a",
      "name": "Route by Intent",
      "type": "n8n-nodes-base.switch",
      "position": [
        780,
        1840
      ],
      "parameters": {},
      "typeVersion": 3.2
    },
    {
      "id": "c286c65e-a6f3-4f0c-a929-4f41db36462d",
      "name": "Parse & Validate Transaction",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        1028,
        1740
      ],
      "parameters": {},
      "typeVersion": 1.9
    },
    {
      "id": "9c1a9f13-5186-4aab-83e7-81d693da4361",
      "name": "Split Transaction Lines",
      "type": "n8n-nodes-base.splitOut",
      "position": [
        1436,
        1840
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "0d8542e8-9cb8-4ec3-8feb-67f8d57b2daf",
      "name": "Format Transaction JSON",
      "type": "n8n-nodes-base.code",
      "position": [
        1656,
        1840
      ],
      "parameters": {},
      "typeVersion": 2
    },
    {
      "id": "8ffe8a54-0795-40ac-8758-7740668f0fe0",
      "name": "Validate Transaction Fields",
      "type": "n8n-nodes-base.code",
      "position": [
        1876,
        1840
      ],
      "parameters": {},
      "typeVersion": 2
    },
    {
      "id": "192cb0d8-6af1-4966-8175-e86f17dd7920",
      "name": "Insert Transaction into DB",
      "type": "n8n-nodes-base.postgres",
      "position": [
        2096,
        1840
      ],
      "parameters": {},
      "typeVersion": 2.6
    },
    {
      "id": "430fb9cb-0ab3-4a7b-a303-28353729627f",
      "name": "Build Confirmation Message",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        2316,
        1840
      ],
      "parameters": {},
      "typeVersion": 1.9
    },
    {
      "id": "910b7fff-4b63-4765-a595-906dbe27dd5c",
      "name": "WhatsApp: Send Transaction Confirmation",
      "type": "n8n-nodes-base.whatsApp",
      "position": [
        2692,
        1840
      ],
      "webhookId": "f71b40d3-80fc-49d5-85f9-bdac44343b7a",
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "d0573213-a380-488e-b234-e4439b1c4f06",
      "name": "simple conversation ",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        1028,
        2140
      ],
      "parameters": {},
      "typeVersion": 1.9
    },
    {
      "id": "f2d6cc18-6cc9-4c0e-9ee0-aa6e94173c42",
      "name": "WhatsApp: Normal Conversation ",
      "type": "n8n-nodes-base.whatsApp",
      "position": [
        1436,
        2140
      ],
      "webhookId": "f71b40d3-80fc-49d5-85f9-bdac44343b7a",
      "parameters": {},
      "typeVersion": 1
    }
  ],
  "active": true,
  "pinData": {},
  "settings": {
    "callerPolicy": "workflowsFromSameOwner",
    "executionOrder": "v1"
  },
  "versionId": "9e860825-bf6a-4a6f-9add-651a8213845e",
  "connections": {
    "Postgres2": {
      "ai_tool": [
        [
          {
            "node": "Execute Daily Report Query",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Calculator": {
      "ai_tool": [
        [
          {
            "node": "Build Custom Financial Summary",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Calculator1": {
      "ai_tool": [
        [
          {
            "node": "Build Daily Financial Summary",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Date and time": {
      "ai_tool": [
        [
          {
            "node": "Parse & Validate Transaction",
            "type": "ai_tool",
            "index": 0
          },
          {
            "node": "simple conversation ",
            "type": "ai_tool",
            "index": 0
          },
          {
            "node": "Build Confirmation Message",
            "type": "ai_tool",
            "index": 0
          },
          {
            "node": "SQL Query Builder",
            "type": "ai_tool",
            "index": 0
          },
          {
            "node": "Build Custom Financial Summary",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "Message Intent Classifier",
            "type": "ai_memory",
            "index": 0
          },
          {
            "node": "simple conversation ",
            "type": "ai_memory",
            "index": 0
          },
          {
            "node": "Parse & Validate Transaction",
            "type": "ai_memory",
            "index": 0
          },
          {
            "node": "SQL Query Builder",
            "type": "ai_memory",
            "index": 0
          },
          {
            "node": "Build Confirmation Message",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Route by Intent": {
      "main": [
        [
          {
            "node": "SQL Query Builder",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Parse & Validate Transaction",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "simple conversation ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Daily 8AM Trigger": {
      "main": [
        [
          {
            "node": "Build Daily Report Query",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SQL Query Builder": {
      "main": [
        [
          {
            "node": "Transform Custom Query for Postgres",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "simple conversation ": {
      "main": [
        [
          {
            "node": "WhatsApp: Normal Conversation ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert Report to CSV": {
      "main": [
        [
          {
            "node": "Build Custom Financial Summary",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "simple conversation ",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Parse & Validate Transaction",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Build Confirmation Message",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Message Intent Classifier",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "SQL Query Builder",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "Build Custom Financial Summary",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model4": {
      "ai_languageModel": [
        [
          {
            "node": "Build Daily Report Query",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model5": {
      "ai_languageModel": [
        [
          {
            "node": "Execute Daily Report Query",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model6": {
      "ai_languageModel": [
        [
          {
            "node": "Build Daily Financial Summary",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Format Transaction JSON": {
      "main": [
        [
          {
            "node": "Validate Transaction Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Transaction Lines": {
      "main": [
        [
          {
            "node": "Format Transaction JSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Build Daily Report Query": {
      "main": [
        [
          {
            "node": "Transform Query for Postgres",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Parse & Validate Transaction",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Incoming WhatsApp Trigger": {
      "main": [
        [
          {
            "node": "Message Intent Classifier",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Message Intent Classifier": {
      "main": [
        [
          {
            "node": "Route by Intent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser2": {
      "ai_outputParser": [
        [
          {
            "node": "Execute Daily Report Query",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Build Confirmation Message": {
      "main": [
        [
          {
            "node": "WhatsApp: Send Transaction Confirmation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute Daily Report Query": {
      "main": [
        [
          {
            "node": "Build Daily Financial Summary",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Insert Transaction into DB": {
      "main": [
        [
          {
            "node": "Build Confirmation Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute Custom Report Query": {
      "main": [
        [
          {
            "node": "Format Custom Query Results",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Custom Query Results": {
      "main": [
        [
          {
            "node": "Convert Report to CSV",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validate Transaction Fields": {
      "main": [
        [
          {
            "node": "Insert Transaction into DB",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse & Validate Transaction": {
      "main": [
        [
          {
            "node": "Split Transaction Lines",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Transform Query for Postgres": {
      "main": [
        [
          {
            "node": "Execute Daily Report Query",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Build Daily Financial Summary": {
      "main": [
        [
          {
            "node": "WhatsApp: Send Daily Report",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Build Custom Financial Summary": {
      "main": [
        [
          {
            "node": "WhatsApp: Send Custom Report",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Transform Custom Query for Postgres": {
      "main": [
        [
          {
            "node": "Execute Custom Report Query",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}